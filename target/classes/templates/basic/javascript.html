<!DOCTYPE html>
<!--
  [강의 18강] 자바스크립트 인라인
  <script th:inline="javascript"> 선언으로 자바스크립트 안에서 타임리프 사용

  인라인 사용 전 문제점:
  - 문자열에 따옴표가 자동으로 안 붙어서 JS 오류 발생
  - 객체가 toString() 결과로 출력되어 JSON이 아님

  인라인 사용 후 이점:
  - 문자열 → 자동으로 따옴표 처리 ("UserA")
  - 숫자    → 그대로 출력 (10)
  - 객체    → 자동으로 JSON 변환 ({"username":"UserA","age":10})
  - 내추럴 템플릿: /*[[${변수}]]*/ "기본값" → 서버 렌더링 시 기본값 대신 실제 값 출력
  - th:each 반복도 지원
-->
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>자바스크립트 인라인</title>
</head>
<body>

<!-- 인라인 미사용: 문자열에 따옴표 없음 → var username = UserA; (JS 오류!) -->
<script>
    var username = [[${user.username}]];
    var age = [[${user.age}]];

    // 내추럴 템플릿: HTML 직접 열면 "test username" 표시, 서버 렌더링 시 실제 값 표시
    // 인라인 없이는 그냥 주석 무시하고 [[${user.username}]] 을 그대로 출력
    var username2 = /*[[${user.username}]]*/ "test username";

    // 객체: toString() 결과 출력 → BasicController.User(username=UserA, age=10)
    var user = [[${user}]];
</script>

<!-- 인라인 사용: th:inline="javascript" 선언 -->
<script th:inline="javascript">
    // 문자열 자동 따옴표 처리 → var username = "UserA";
    var username = [[${user.username}]];

    // 숫자는 그대로 → var age = 10;
    var age = [[${user.age}]];

    // 내추럴 템플릿: 서버 렌더링 시 /*주석*/ 제거하고 실제 값으로 교체
    // HTML 직접 열면 "test username" 표시
    var username2 = /*[[${user.username}]]*/ "test username";

    // 객체 자동 JSON 변환 → var user = {"username":"UserA","age":10};
    var user = [[${user}]];
</script>

<!-- 자바스크립트 인라인 each: JS 안에서도 th:each 반복 처리 가능 -->
<script th:inline="javascript">
    // [# th:each]: JS 인라인 반복문, 렌더링 시 [# ... [/] ] 태그는 사라지고 내용만 반복
    [# th:each="user, stat : ${users}"]
    var user[[${stat.count}]] = [[${user}]]; // user1, user2, user3 변수가 각각 생성됨
    [/]
</script>

</body>
</html>
