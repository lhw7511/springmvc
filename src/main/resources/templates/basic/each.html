<!DOCTYPE html>
<!--
  [강의 14강] 반복
  th:each 로 컬렉션(List, Map, 배열 등) 반복 처리
  기본 문법: th:each="변수 : ${컬렉션}"
  반복 상태 변수: th:each="변수, 상태변수 : ${컬렉션}"
  → 상태변수명 생략 시 '변수명Stat' 으로 자동 생성 (ex: userStat)

  반복 상태 변수 제공 정보:
  - index   : 0부터 시작하는 인덱스
  - count   : 1부터 시작하는 카운트 (실무에서 자주 사용)
  - size    : 전체 크기
  - even    : 짝수 여부 (boolean)
  - odd     : 홀수 여부 (boolean)
  - first   : 첫 번째 여부 (boolean)
  - last    : 마지막 여부 (boolean)
  - current : 현재 객체
-->
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>반복</title>
</head>
<body>

<h1>기본 테이블</h1>
<table border="1">
    <tr>
        <th>username</th>
        <th>age</th>
    </tr>
    <!-- th:each: users 리스트를 순서대로 반복, 각 요소를 user 변수로 접근 -->
    <tr th:each="user : ${users}">
        <td th:text="${user.username}">username</td>
        <td th:text="${user.age}">0</td>
    </tr>
</table>

<h1>반복 상태 유지</h1>
<table border="1">
    <tr>
        <th>count</th>
        <th>username</th>
        <th>age</th>
        <th>etc</th>
    </tr>
    <!-- userStat: 반복 상태 변수 (생략 시 userStat 으로 자동 생성됨) -->
    <tr th:each="user, userStat : ${users}">
        <td th:text="${userStat.count}">username</td>
        <td th:text="${user.username}">username</td>
        <td th:text="${user.age}">0</td>
        <td>
            index=<span th:text="${userStat.index}"></span>      <!-- 0부터 시작 -->
            count=<span th:text="${userStat.count}"></span>      <!-- 1부터 시작 -->
            size=<span th:text="${userStat.size}"></span>        <!-- 전체 크기 -->
            even?=<span th:text="${userStat.even}"></span>       <!-- 짝수 여부 -->
            odd?=<span th:text="${userStat.odd}"></span>         <!-- 홀수 여부 -->
            first?=<span th:text="${userStat.first}"></span>     <!-- 첫번째 여부 -->
            last?=<span th:text="${userStat.last}"></span>       <!-- 마지막 여부 -->
            current=<span th:text="${userStat.current}"></span>  <!-- 현재 객체 -->
        </td>
    </tr>
</table>

</body>
</html>
